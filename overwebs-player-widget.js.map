{"version":3,"names":[],"mappings":"","sources":["overwebs-player-widget.js"],"sourcesContent":["import { GluonElement, html } from '../gluonjs/gluon.js';\nimport '../overwebs-fonts/overwebs-fonts.js';\n\nconst prestigeRanks = ['bronze', 'silver', 'gold'];\nconst prestigeSizes = ['16', '16', '16', '15', '13', '11'];\nconst absoluteUrl = /^(?:https?:)?\\/\\//;\n\nclass OverwebsPlayerWidget extends GluonElement {\n  get template() {\n    return html`\n<style>\n  :host {\n    display: flex;\n    height: calc(60 * var(--overwebs-window-size, 1920px) / 1920);\n    width: calc(406 * var(--overwebs-window-size, 1920px) / 1920);\n    background: #27354F;\n  }\n\n  #status {\n    height: 100%;\n    width: calc(6 * var(--overwebs-window-size, 1920px) / 1920);\n    background: #7DFF00;\n  }\n\n  #avatar {\n    height: 100%;\n    width: calc(60 * var(--overwebs-window-size, 1920px) / 1920);\n    background-size: contain;\n    background-repeat: no-repeat;\n  }\n\n  .player {\n    line-height: 1;\n    display: flex;\n    align-items: center;\n    color: white;\n    height: 100%;\n    width: calc(340 * var(--overwebs-window-size, 1920px) / 1920);\n  }\n\n  .name {\n    margin-left: calc(9.8 * var(--overwebs-window-size, 1920px) / 1920);\n    font-size: calc(18 * var(--overwebs-window-size, 1920px) / 1920);\n    margin-top: calc(1 * var(--overwebs-window-size, 1920px) / 1920);\n    letter-spacing: calc(0.25 * var(--overwebs-window-size, 1920px) / 1920);\n    font-family: overwebs-helvetica;\n    text-transform: uppercase;\n  }\n\n  #levelBox {\n    height: calc(18 * var(--overwebs-window-size, 1920px) / 1920);\n    margin-left: calc(8 * var(--overwebs-window-size, 1920px) / 1920);\n    padding-left: calc(6 * var(--overwebs-window-size, 1920px) / 1920);\n    border-radius: calc(3 * var(--overwebs-window-size, 1920px) / 1920);\n    padding-right: calc(2 * var(--overwebs-window-size, 1920px) / 1920);\n    display: inline-flex;\n    align-items: center;\n    font-family: overwebs-futura;\n  }\n\n  .level {\n    font-size: calc(15 * var(--overwebs-window-size, 1920px) / 1920);\n    line-height: calc(18 * var(--overwebs-window-size, 1920px) / 1920);\n    padding-right: calc(5 * var(--overwebs-window-size, 1920px) / 1920);\n    transform: translateY(calc(1 * var(--overwebs-window-size, 1920px) / 1920));\n  }\n\n  #prestige {\n    display: inline-flex;\n    align-items: center;\n    border-radius: calc(3 * var(--overwebs-window-size, 1920px) / 1920);\n    background: white;\n    letter-spacing: calc(-3 * var(--overwebs-window-size, 1920px) / 1920);\n    height: calc(16 * var(--overwebs-window-size, 1920px) / 1920);\n    vertical-align: text-bottom;\n  }\n\n  #levelBox.bronze {\n    background: #A35435;\n    color: white;\n  }\n\n  #levelBox.bronze #prestige {\n    color: #A35435;\n  }\n\n  #levelBox.silver {\n    background: #AFBDC3;\n    color: #2F3C55;\n  }\n\n  #levelBox.silver #prestige {\n    color: #333F58;\n  }\n\n  #levelBox.gold {\n    background: #D3AD12;\n    color: #6E2E15;\n  }\n  #levelBox.gold #prestige {\n    color: #A35435;\n  }\n</style>\n<div id=\"status\"></div>\n<div id=\"avatar\"></div>\n<div class=\"player\">\n  <span class=\"name\">${this.name}</span>\n  <span id=\"levelBox\">\n    <span class=\"level\">${(this.level - 1) % 100 + 1}</span>\n    <!-- TODO: The futura font does not support the star glyph -->\n    <span id=\"prestige\">${'â˜…'.repeat(Math.trunc((this.level % 600 - 1) / 100))}</span>\n  </span>\n</div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this._player = {};\n  }\n\n  set player(player) {\n    // Risky strategy, but it works\n    Object.assign(this, player);\n  }\n\n  get player() {\n    return this._player;\n  }\n\n  set name(name) {\n    this._player.name = name;\n    this.render();\n  }\n\n  get name() {\n    return this._player.name || '';\n  }\n\n  set avatar(avatar) {\n    this._player.avatar = avatar;\n    if (absoluteUrl.test(avatar)) {\n      this.$.avatar.style.backgroundImage = `url(\"${avatar}\")`;\n    } else {\n      this.$.avatar.style.backgroundImage = `url(\"${(window.modulesAssetPath && window.modulesAssetPath('overwebs-player-widget')) ||\n        ''}/avatars/${avatar}.png\")`;\n    }\n  }\n\n  get avatar() {\n    return this._player.avatar;\n  }\n\n  set level(level) {\n    this._player.level = level;\n    this.$.levelBox.classList.remove(...prestigeRanks);\n    this.$.levelBox.classList.add(prestigeRanks[Math.trunc(level / 600)]);\n    const prestige = Math.trunc((level % 600 - 1) / 100);\n    this.$.prestige.style.fontSize = `calc(${prestigeSizes[prestige]} * var(--overwebs-window-size, 1920px) / 1920)`;\n    const padding = prestige > 0 ? '3' : '0';\n    this.$.prestige.style.paddingRight = `calc(${padding} * var(--overwebs-window-size, 1920px) / 1920)`;\n    this.render();\n  }\n\n  get level() {\n    return this._player.level || '';\n  }\n\n  set status(status) {\n    this._player.status = status;\n    this.$.status.style.background = this._statusBackground(status);\n  }\n\n  get status() {\n    return this._player.status;\n  }\n\n  _statusBackground(status) {\n    switch (status) {\n      case 'available':\n        return '#7DFF00';\n      case 'away':\n        return '#F9CC1E';\n      case 'busy':\n        return '#BE1E2D';\n      default:\n        return '#7DFF00';\n    }\n  }\n}\n\ncustomElements.define(OverwebsPlayerWidget.is, OverwebsPlayerWidget);\n"],"file":"overwebs-player-widget.js"}